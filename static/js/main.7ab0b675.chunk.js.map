{"version":3,"sources":["database/firebase-config.js","api/keys.js","components/restaurant-info.js","components/recipe-info.js","index.js","api/recipe-search.js","api/zomato-search.js"],"names":["config","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","KEYS","CLARIFAI","ZOMATO","EDAMAM","APP_ID","API_KEY","RestaurantInfo","console","log","this","html","_templateObject","image","defaultImage","name","knowMore","id","type","Number","String","cuisines","latitude","longitude","address","userRating","Object","LitElement","RecipeInfo","recipe_info_templateObject","label","source","sourceUrl","ingredients","Array","dietLabels","healthLabels","file","document","getElementById","resultTitle","restTabPane","recipeTabPane","customElements","define","database","initializeApp","ref","child","app","App","pred","recipes","prediction","appID","query","from","to","callback","innerHTML","data","row","res","hits","recipeComps","firstChild","removeChild","i","length","push","setAttribute","recipe","url","ingredientLines","concat","baseURI","j","createElement","appendChild","addRecipes","axios","get","then","restaurants","lat","long","navigator","geolocation","getCurrentPosition","pos","coords","cityID","entityType","count","getRestaurants","resComps","restaurant","location","thumb","user_rating","aggregate_rating","addRestaurants","addEventListener","_loop","predict","results","models","response","outputs","concepts","toUpperCase","err","window","src","preview","currFile","files","reader","FileReader","Blob","result","replace","readAsDataURL","previewFile"],"mappings":"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","file":"static/js/main.7ab0b675.chunk.js","sourcesContent":["/* eslint-disable eol-last */\nconst config = {\n  apiKey: 'AIzaSyCK5tTuXD5WbHmhC-hBj-giHh3JLnb_fhE',\n  authDomain: 'foozam-test.firebaseapp.com',\n  databaseURL: 'https://foozam-test.firebaseio.com',\n  projectId: 'foozam-test',\n  storageBucket: '',\n  messagingSenderId: '791490333729',\n};\n\nexport default config;","/* eslint-disable eol-last */\nconst KEYS = {\n  CLARIFAI: 'c3974e84eeff423b94b19a446da2ade4',\n  ZOMATO: 'ab4ea1ed53fa5b1863ef29fe21faa53c',\n  EDAMAM: {\n    APP_ID: '106b9cef',\n    API_KEY: 'c0136cf90a5c614c511132c3724921a7',\n  },\n};\n\nexport default KEYS;","/* eslint-disable no-console */\n/* eslint-disable template-tag-spacing */\n/* eslint-disable eol-last */\nimport {\n  LitElement,\n  html,\n} from '@polymer/lit-element';\n\nexport default class RestaurantInfo extends LitElement {\n  static get properties() {\n    return {\n      id: {\n        type: Number,\n      },\n      name: {\n        type: String,\n      },\n      cuisines: {\n        type: String,\n      },\n      latitude: {\n        type: Number,\n      },\n      longitude: {\n        type: Number,\n      },\n      address: {\n        type: String,\n      },\n      userRating: {\n        type: Object,\n      },\n      image: {\n        type: String,\n      },\n      defaultImage: {\n        type: String,\n      },\n    };\n  }\n\n  knowMore() {\n    console.log(this);\n  }\n\n  render() {\n    return html `\n      <head>\n        <link href=\"./assets/css/black-dashboard.css?v=1.0.0\" rel=\"stylesheet\" />\n      </head>\n      <div class=\"row\" style=\"text-align: center\">\n        <div class=\"col-lg-6 col-md-12\">\n          <img src=\"${this.image || this.defaultImage}\" alt=\"Restaurant Image\" />\n        </div>\n        <div class=\"col-lg-6 col-md-12 pt-3\">\n          <h4 class=\"card-title\">${this.name}</h4>\n          <button\n            type=\"button\"\n            id=\"know-more\"\n            class=\"btn btn-warning btn-simple\"\n            @click=\"${this.knowMore}\"\n          >\n            Know More\n          </button>\n        </div>\n      </div>\n    `;\n  }\n}","/* eslint-disable no-console */\n/* eslint-disable template-tag-spacing */\n/* eslint-disable eol-last */\nimport {\n  LitElement,\n  html,\n} from '@polymer/lit-element';\n\nexport default class RecipeInfo extends LitElement {\n  static get properties() {\n    return {\n      id: {\n        type: Number,\n      },\n      label: {\n        type: String,\n      },\n      source: {\n        type: String,\n      },\n      sourceUrl: {\n        type: String,\n      },\n      ingredients: {\n        type: Array,\n      },\n      image: {\n        type: String,\n      },\n      defaultImage: {\n        type: String,\n      },\n      dietLabels: {\n        type: Array,\n      },\n      healthLabels: {\n        type: Array,\n      },\n    };\n  }\n\n  knowMore() {\n    console.log(this);\n  }\n\n  render() {\n    return html `\n      <head>\n        <link href=\"./assets/css/black-dashboard.css?v=1.0.0\" rel=\"stylesheet\" />\n      </head>\n      <div class=\"row\" style=\"text-align: center\">\n        <div class=\"col-lg-6 col-md-12\">\n          <img src=\"${this.image || this.defaultImage}\" alt=\"Recipe Image\" />\n        </div>\n        <div class=\"col-lg-6 col-md-12 pt-3\">\n          <h4 class=\"card-title\">${this.label}</h4>\n          <button\n            type=\"button\"\n            id=\"know-more\"\n            class=\"btn btn-warning btn-simple\"\n            @click=\"${this.knowMore}\"\n          >\n            Know More\n          </button>\n        </div>\n      </div>\n    `;\n  }\n}","/* eslint-disable eol-last */\n/* eslint-disable no-undef */\n/* eslint-disable no-console */\n/* eslint-disable func-names */\nimport {\n  App,\n} from 'clarifai';\nimport {\n  initializeApp,\n} from 'firebase';\nimport config from './database/firebase-config';\nimport KEYS from './api/keys';\nimport {\n  getRestaurants,\n} from './api/zomato-search';\nimport {\n  getRecipes,\n} from './api/recipe-search';\nimport RestaurantInfo from './components/restaurant-info';\nimport RecipeInfo from './components/recipe-info';\n\nconst file = document.getElementById('img-file');\nconst resultTitle = document.getElementById('result-title');\nconst restTabPane = document.getElementById('link3');\nconst recipeTabPane = document.getElementById('link1');\n\ncustomElements.define('restaurant-info', RestaurantInfo);\ncustomElements.define('recipe-info', RecipeInfo);\n\nconst firebase = initializeApp(config);\n\nconst database = firebase\n  .database()\n  .ref()\n  .child('image');\n\nconst app = new App({\n  apiKey: KEYS.CLARIFAI,\n});\n\nconst pred = [];\n\nfunction addRestaurants(data) {\n  const res = data.restaurants;\n  const resComps = [];\n  let row;\n\n  while (restTabPane.firstChild) {\n    restTabPane.removeChild(restTabPane.firstChild);\n  }\n\n  for (let i = 0; i < res.length; i += 1) {\n    resComps.push(new RestaurantInfo());\n    resComps[i].setAttribute('class', 'col-lg-6 col-md-12 pb-3');\n    resComps[i].setAttribute('id', res[i].restaurant.id);\n    resComps[i].setAttribute('name', res[i].restaurant.name);\n    resComps[i].setAttribute('longitude', res[i].restaurant.location.longitude);\n    resComps[i].setAttribute('latitude', res[i].restaurant.location.latitude);\n    resComps[i].setAttribute('address', res[i].restaurant.location.address);\n    resComps[i].setAttribute('cuisines', res[i].restaurant.cuisines);\n    resComps[i].setAttribute('image', res[i].restaurant.thumb);\n    resComps[i].setAttribute('userRating', res[i].restaurant.user_rating.aggregate_rating);\n    resComps[i].setAttribute('defaultImage', `${document.baseURI}/assets/img/rest-default.png`);\n  }\n\n  for (let j = 0; j < resComps.length - 1; j += 1) {\n    if (j % 2 === 0) {\n      row = document.createElement('div');\n      row.setAttribute('class', 'row');\n      row.appendChild(resComps[j]);\n      row.appendChild(resComps[j + 1]);\n      restTabPane.appendChild(row);\n    }\n  }\n}\n\nfunction addRecipes(data) {\n  const res = data.hits;\n  const recipeComps = [];\n  let row;\n\n  while (recipeTabPane.firstChild) {\n    recipeTabPane.removeChild(recipeTabPane.firstChild);\n  }\n\n  for (let i = 0; i < res.length; i += 1) {\n    recipeComps.push(new RecipeInfo());\n    recipeComps[i].setAttribute('class', 'col-lg-6 col-md-12 pb-3');\n    recipeComps[i].setAttribute('id', i);\n    recipeComps[i].setAttribute('label', res[i].recipe.label);\n    recipeComps[i].setAttribute('source', res[i].recipe.source);\n    recipeComps[i].setAttribute('sourceUrl', res[i].recipe.url);\n    recipeComps[i].setAttribute('image', res[i].recipe.image);\n    recipeComps[i].setAttribute('ingredients', res[i].recipe.ingredientLines);\n    recipeComps[i].setAttribute('defaultImage', `${document.baseURI}/assets/img/recipe-default.png`);\n  }\n\n  for (let j = 0; j < recipeComps.length - 1; j += 1) {\n    if (j % 2 === 0) {\n      row = document.createElement('div');\n      row.setAttribute('class', 'row');\n      row.appendChild(recipeComps[j]);\n      row.appendChild(recipeComps[j + 1]);\n      recipeTabPane.appendChild(row);\n    }\n  }\n}\n\nfunction recipes(prediction) {\n  getRecipes(KEYS.EDAMAM.API_KEY, KEYS.EDAMAM.APP_ID, prediction.innerHTML, 0, 20, (data) => {\n    addRecipes(data);\n  });\n}\n\nfunction restaurants(prediction) {\n  let lat;\n  let long;\n  if (navigator.geolocation) {\n    navigator.geolocation.getCurrentPosition((pos) => {\n      lat = pos.coords.latitude;\n      long = pos.coords.longitude;\n      getRestaurants(\n        KEYS.ZOMATO,\n        prediction.innerHTML,\n        5,\n        'city',\n        20,\n        lat,\n        long,\n        (data) => {\n          addRestaurants(data);\n        },\n      );\n    });\n  }\n}\n\nfor (let i = 1; i <= 3; i += 1) {\n  pred.push(document.getElementById(`pred-${i}`));\n}\n\nfor (let i = 0; i < 3; i += 1) {\n  pred[i].addEventListener('click', () => {\n    resultTitle.innerHTML = 'Foozam Results For ';\n    resultTitle.innerHTML = resultTitle.innerHTML.concat(pred[i].innerHTML);\n    restaurants(pred[i]);\n  });\n}\n\nfunction predict(image) {\n  const results = [];\n  app.models.predict('bd367be194cf45149e75f01d59f77ba7', image).then(\n    (response) => {\n      for (let i = 0; i < 5; i += 1) {\n        results.push(response.outputs[0].data.concepts[i].name);\n      }\n      for (let i = 0; i < 3; i += 1) {\n        pred[i].innerHTML = results[i].toUpperCase();\n      }\n      resultTitle.innerHTML = 'Foozam Results For ';\n      resultTitle.innerHTML = resultTitle.innerHTML.concat(pred[0].innerHTML);\n      recipes(pred[0]);\n      restaurants(pred[0]);\n    },\n    (err) => {\n      console.log(err);\n    },\n  );\n}\n\nfunction previewFile() {\n  const preview = document.getElementById('foozam-img'); // selects the query named img\n\n  let currFile = document.getElementById('img-file').files[0]; // sames as here\n  const reader = new FileReader();\n  currFile = new Blob([currFile]);\n\n  reader.addEventListener('loadend', () => {\n    preview.src = reader.result;\n    database.push(reader.result);\n    const base64String = reader.result.replace('data:application/octet-stream;base64,', '');\n    predict(base64String);\n  });\n\n  if (currFile) {\n    reader.readAsDataURL(currFile);\n  }\n}\n\nwindow.addEventListener('load', () => {\n  const img = document.getElementById('foozam-img');\n  predict(img.src);\n});\n\nfile.addEventListener('change', () => {\n  previewFile();\n});","/* eslint-disable import/prefer-default-export */\n/* eslint-disable arrow-body-style */\n/* eslint-disable eol-last */\nimport axios from 'axios';\n\nexport function getRecipes(apiKey, appID, query, from, to, callback) {\n  axios.get(`https://api.edamam.com/search?app_id=${appID}&app_key=${apiKey}&q=${query}&from=${from}&to=${to}`)\n    .then((res) => {\n      callback(res.data);\n    });\n}","/* eslint-disable import/prefer-default-export */\n/* eslint-disable arrow-body-style */\n/* eslint-disable eol-last */\nimport axios from 'axios';\n\nexport function getRestaurants(apiKey, query, cityID, entityType, count, lat, long, callback) {\n  axios.get(`https://developers.zomato.com/api/v2.1/search?apikey=${apiKey}&entity_id=${cityID}&entity_type=${entityType}&q=${query}&count=${count}&lat=${lat}&lon=${long}&sort=real_distance&order=asc`)\n    .then((res) => {\n      callback(res.data);\n    });\n}"],"sourceRoot":""}